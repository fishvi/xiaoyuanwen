;$(function(){function scrollConversationScreen(){$("input[name='message']").focus();$('.messages-list').scrollTop($('.messages-list')[0].scrollHeight);}
$("#send").submit(function(){$.ajax({url:'/messager/send-message/',data:$("#send").serialize(),cache:false,type:'POST',success:function(data){$(".send-message").before(data);$("input[name='message']").val('');scrollConversationScreen();}});return false;});const ws_scheme=window.location.protocol==="https:"?"wss":"ws";const ws_path=ws_scheme+"://"+window.location.host+"/ws/"+currentUser+"/";const ws=new ReconnectingWebSocket(ws_path);ws.onmessage=function(event){const data=JSON.parse(event.data);if(data.sender===activeUser){$(".send-message").before(data.message);scrollConversationScreen();}}});